<?xml version="1.0" encoding="utf-8"?>
<mx:Application 
  xmlns:mx="http://www.adobe.com/2006/mxml"
  width="100%" 
  height="100%"
  >
  
  <mx:Script>
    <![CDATA[
    
      import spectacular.framework.*;
      import spectacular.framework.reporters.*;      
    
      [Bindable]      
      public var runner:BaseSpecRunner;
      
      [Bindable]
      public var reporter:CompositeSpecReporter;
      
      [Bindable]
      public var textSpecReporter:TextSpecReporter;
      
      [Bindable]
      public var statistics:StatisticsSpecReporter;
      
      public function run(exampleGroup:ExampleGroup = null):void {
        
        textSpecReporter = new TextSpecReporter();
        statistics = new StatisticsSpecReporter();
        
        reporter = new CompositeSpecReporter();
        reporter.addReporter(statistics);
        reporter.addReporter(textSpecReporter);
        
        runner = new BaseSpecRunner(Spec.spec, reporter);
        runner.run(exampleGroup || Spec.root);
      }
    
    ]]>
  </mx:Script>
  
  <mx:Panel id="spectacularContainer"
    width="100%"
    height="100%">
    
    <mx:VBox>
      <mx:Grid>
        <mx:GridRow>
          <mx:GridItem>
            <mx:Label width="100" text="Example Groups" />
            <mx:Label text="{ statistics.exampleGroupCount }" />
          </mx:GridItem>
        </mx:GridRow>
        <mx:GridRow>
          <mx:GridItem>
            <mx:Label width="100" text="Examples" />
            <mx:Label text="{ statistics.exampleCount }" />
          </mx:GridItem>
        </mx:GridRow>
        <mx:GridRow>
          <mx:GridItem>
            <mx:Label width="100" text="Failures" />
            <mx:Label text="{ statistics.failureCount }" />
          </mx:GridItem>
        </mx:GridRow>
        <mx:GridRow>
          <mx:GridItem>
            <mx:Label width="100" text="Running Time" />
            <mx:Label text="{ statistics.runningTime }ms" />
          </mx:GridItem>
        </mx:GridRow>
      </mx:Grid>
    </mx:VBox>

    <mx:TextArea id="text" 
      width="100%"
      height="100%"
      editable="false"
      text="{ textSpecReporter.text }"
      />
      
  </mx:Panel>
</mx:Application>
